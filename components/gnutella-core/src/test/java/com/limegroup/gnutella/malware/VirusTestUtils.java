package com.limegroup.gnutella.malware;

import java.io.File;

class VirusTestUtils {
    private static final String AVG_ROOT_ENV = "AVG_ROOT";
    
    /**
     * @return the root directory containing avg testing files. 
     */
    public static File getAVGRootEnvironment() {
        File file = getFileFromEnvironmentVariable(AVG_ROOT_ENV);
        if(file == null || !file.exists()) {
            return new File("c:/files");
        } else {
            return file;
        }
    }
    
    /**
     * @return directory containing avg update zip files. 
     */
    public static File getAVGUpdatesDirectory() {
        return new File(getAVGRootEnvironment(), "avg-updates");        
    }
    
    /**
     * @return a File path stored in the given environment variable, or null if none exists. 
     */
    private static File getFileFromEnvironmentVariable(String environmentVariable) {
        File file = null;
        try {
            String fileEnvPath = System.getenv(environmentVariable);
            if(fileEnvPath != null && !fileEnvPath.trim().equals("")) {
                file = new File(fileEnvPath);
            }
        } catch(SecurityException ignore) {
        }
        return file;
    }

}
