<?xml version="1.0"?>
<project name="MojitoDHT" default="build" basedir=".">
    <description>MojitoDHT</description>

	<property name="basedir" value="."/>
	<property name="coredir" value="../core"/>
	<property name="lib" value="../lib"/>
	<property name="jars" value="${lib}/jars"/>
		
	<path id="default.classpath" >
		<fileset dir="${jars}" includes="**/*.jar"/>
	</path>
	
    <target name="build">
	    	<javac srcdir="${basedir}:${coredir}" 
				destdir="${basedir}"
		    		target="1.4"
		    		source="1.4"
	    			compiler="javac1.4"
		    		debug="true"
	    			optimize="false">
			<classpath refid="default.classpath"/>
    	    </javac>
    </target>
		
	<target name="clean">
		<delete>
			<fileset dir="${basedir}" 
				includes="com/**/*.class de/**/*.class"
			/>
		</delete>
	</target>
	
	<target name="jar" depends="clean, build">
		<delete file="mojito.jar"/>
		<jar destfile="mojito.jar" 
				basedir="${basedir}"
				includes="com/**"
				excludes="**/bin/** **/tests/** **/statistics/**"
				compress="false">
		</jar>
	</target>
		
	<target name="planetLab" depends="clean, build">
		<delete file="planetlab.jar"/>
		<jar destfile="planetlab.jar" 
				basedir="${basedir}"
				includes="com/**, de/**"
				excludes="**/bin/**"
				compress="false">
			<manifest>
			 	<attribute name="Main-Class" value="com.limegroup.mojito.tests.PlanetLab"/>
			 	<attribute name="Class-Path" value=". commons-logging.jar log4j.jar core.jar"/>
			</manifest>
		</jar>
	</target>
</project>

